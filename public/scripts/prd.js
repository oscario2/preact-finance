(()=>{var K,k,Ge,Zt,X,Ve,je,qe,te={},Ye=[],e0=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function P(e,t){for(var o in t)e[o]=t[o];return e}function ze(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,o){var r,a,n,s={};for(n in t)n=="key"?r=t[n]:n=="ref"?a=t[n]:s[n]=t[n];if(arguments.length>2&&(s.children=arguments.length>3?K.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(n in e.defaultProps)s[n]===void 0&&(s[n]=e.defaultProps[n]);return $(e,s,r,a,null)}function $(e,t,o,r,a){var n={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++Ge};return a==null&&k.vnode!=null&&k.vnode(n),n}function N(e){return e.children}function T(e,t){this.props=e,this.context=t}function Y(e,t){if(t==null)return e.__?Y(e.__,e.__.__k.indexOf(e)+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?Y(e):null}function Ke(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return Ke(e)}}function he(e){(!e.__d&&(e.__d=!0)&&X.push(e)&&!oe.__r++||je!==k.debounceRendering)&&((je=k.debounceRendering)||Ve)(oe)}function oe(){for(var e;oe.__r=X.length;)e=X.sort(function(t,o){return t.__v.__b-o.__v.__b}),X=[],e.some(function(t){var o,r,a,n,s,i;t.__d&&(s=(n=(o=t).__v).__e,(i=o.__P)&&(r=[],(a=P({},n)).__v=n.__v+1,ke(i,n,a,o.__n,i.ownerSVGElement!==void 0,n.__h!=null?[s]:null,r,s??Y(n),n.__h),tt(r,n),n.__e!=s&&Ke(n)))})}function Xe(e,t,o,r,a,n,s,i,l,u){var c,m,p,f,_,g,h,v=r&&r.__k||Ye,y=v.length;for(o.__k=[],c=0;c<t.length;c++)if((f=o.__k[c]=(f=t[c])==null||typeof f=="boolean"?null:typeof f=="string"||typeof f=="number"||typeof f=="bigint"?$(null,f,null,null,f):Array.isArray(f)?$(N,{children:f},null,null,null):f.__b>0?$(f.type,f.props,f.key,null,f.__v):f)!=null){if(f.__=o,f.__b=o.__b+1,(p=v[c])===null||p&&f.key==p.key&&f.type===p.type)v[c]=void 0;else for(m=0;m<y;m++){if((p=v[m])&&f.key==p.key&&f.type===p.type){v[m]=void 0;break}p=null}ke(e,f,p=p||te,a,n,s,i,l,u),_=f.__e,(m=f.ref)&&p.ref!=m&&(h||(h=[]),p.ref&&h.push(p.ref,null,f),h.push(m,f.__c||_,f)),_!=null?(g==null&&(g=_),typeof f.type=="function"&&f.__k===p.__k?f.__d=l=$e(f,l,e):l=Qe(e,f,p,v,_,l),typeof o.type=="function"&&(o.__d=l)):l&&p.__e==l&&l.parentNode!=e&&(l=Y(p))}for(o.__e=g,c=y;c--;)v[c]!=null&&(typeof o.type=="function"&&v[c].__e!=null&&v[c].__e==o.__d&&(o.__d=Y(r,c+1)),rt(v[c],v[c]));if(h)for(c=0;c<h.length;c++)ot(h[c],h[++c],h[++c])}function $e(e,t,o){for(var r,a=e.__k,n=0;a&&n<a.length;n++)(r=a[n])&&(r.__=e,t=typeof r.type=="function"?$e(r,t,o):Qe(o,r,r,a,r.__e,t));return t}function U(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(o){U(o,t)}):t.push(e)),t}function Qe(e,t,o,r,a,n){var s,i,l;if(t.__d!==void 0)s=t.__d,t.__d=void 0;else if(o==null||a!=n||a.parentNode==null)e:if(n==null||n.parentNode!==e)e.appendChild(a),s=null;else{for(i=n,l=0;(i=i.nextSibling)&&l<r.length;l+=2)if(i==a)break e;e.insertBefore(a,n),s=n}return s!==void 0?s:a.nextSibling}function t0(e,t,o,r,a){var n;for(n in o)n==="children"||n==="key"||n in t||re(e,n,null,o[n],r);for(n in t)a&&typeof t[n]!="function"||n==="children"||n==="key"||n==="value"||n==="checked"||o[n]===t[n]||re(e,n,t[n],o[n],r)}function Je(e,t,o){t[0]==="-"?e.setProperty(t,o):e[t]=o==null?"":typeof o!="number"||e0.test(t)?o:o+"px"}function re(e,t,o,r,a){var n;e:if(t==="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)o&&t in o||Je(e.style,t,"");if(o)for(t in o)r&&o[t]===r[t]||Je(e.style,t,o[t])}else if(t[0]==="o"&&t[1]==="n")n=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+n]=o,o?r||e.addEventListener(t,n?et:Ze,n):e.removeEventListener(t,n?et:Ze,n);else if(t!=="dangerouslySetInnerHTML"){if(a)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o!=null&&(o!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,o):e.removeAttribute(t))}}function Ze(e){this.l[e.type+!1](k.event?k.event(e):e)}function et(e){this.l[e.type+!0](k.event?k.event(e):e)}function ke(e,t,o,r,a,n,s,i,l){var u,c,m,p,f,_,g,h,v,y,b,I=t.type;if(t.constructor!==void 0)return null;o.__h!=null&&(l=o.__h,i=t.__e=o.__e,t.__h=null,n=[i]),(u=k.__b)&&u(t);try{e:if(typeof I=="function"){if(h=t.props,v=(u=I.contextType)&&r[u.__c],y=u?v?v.props.value:u.__:r,o.__c?g=(c=t.__c=o.__c).__=c.__E:("prototype"in I&&I.prototype.render?t.__c=c=new I(h,y):(t.__c=c=new T(h,y),c.constructor=I,c.render=r0),v&&v.sub(c),c.props=h,c.state||(c.state={}),c.context=y,c.__n=r,m=c.__d=!0,c.__h=[]),c.__s==null&&(c.__s=c.state),I.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=P({},c.__s)),P(c.__s,I.getDerivedStateFromProps(h,c.__s))),p=c.props,f=c.state,m)I.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(I.getDerivedStateFromProps==null&&h!==p&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(h,y),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(h,c.__s,y)===!1||t.__v===o.__v){c.props=h,c.state=c.__s,t.__v!==o.__v&&(c.__d=!1),c.__v=t,t.__e=o.__e,t.__k=o.__k,t.__k.forEach(function(G){G&&(G.__=t)}),c.__h.length&&s.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(h,c.__s,y),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(p,f,_)})}c.context=y,c.props=h,c.state=c.__s,(u=k.__r)&&u(t),c.__d=!1,c.__v=t,c.__P=e,u=c.render(c.props,c.state,c.context),c.state=c.__s,c.getChildContext!=null&&(r=P(P({},r),c.getChildContext())),m||c.getSnapshotBeforeUpdate==null||(_=c.getSnapshotBeforeUpdate(p,f)),b=u!=null&&u.type===N&&u.key==null?u.props.children:u,Xe(e,Array.isArray(b)?b:[b],t,o,r,a,n,s,i,l),c.base=t.__e,t.__h=null,c.__h.length&&s.push(c),g&&(c.__E=c.__=null),c.__e=!1}else n==null&&t.__v===o.__v?(t.__k=o.__k,t.__e=o.__e):t.__e=o0(o.__e,t,o,r,a,n,s,l);(u=k.diffed)&&u(t)}catch(G){t.__v=null,(l||n!=null)&&(t.__e=i,t.__h=!!l,n[n.indexOf(i)]=null),k.__e(G,t,o)}}function tt(e,t){k.__c&&k.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(r){r.call(o)})}catch(r){k.__e(r,o.__v)}})}function o0(e,t,o,r,a,n,s,i){var l,u,c,m=o.props,p=t.props,f=t.type,_=0;if(f==="svg"&&(a=!0),n!=null){for(;_<n.length;_++)if((l=n[_])&&(l===e||(f?l.localName==f:l.nodeType==3))){e=l,n[_]=null;break}}if(e==null){if(f===null)return document.createTextNode(p);e=a?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,p.is&&p),n=null,i=!1}if(f===null)m===p||i&&e.data===p||(e.data=p);else{if(n=n&&K.call(e.childNodes),u=(m=o.props||te).dangerouslySetInnerHTML,c=p.dangerouslySetInnerHTML,!i){if(n!=null)for(m={},_=0;_<e.attributes.length;_++)m[e.attributes[_].name]=e.attributes[_].value;(c||u)&&(c&&(u&&c.__html==u.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(t0(e,p,m,a,i),c)t.__k=[];else if(_=t.props.children,Xe(e,Array.isArray(_)?_:[_],t,o,r,a&&f!=="foreignObject",n,s,n?n[0]:o.__k&&Y(o,0),i),n!=null)for(_=n.length;_--;)n[_]!=null&&ze(n[_]);i||("value"in p&&(_=p.value)!==void 0&&(_!==e.value||f==="progress"&&!_)&&re(e,"value",_,m.value,!1),"checked"in p&&(_=p.checked)!==void 0&&_!==e.checked&&re(e,"checked",_,m.checked,!1))}return e}function ot(e,t,o){try{typeof e=="function"?e(t):e.current=t}catch(r){k.__e(r,o)}}function rt(e,t,o){var r,a;if(k.unmount&&k.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ot(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(n){k.__e(n,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&rt(r[a],t,typeof e.type!="function");o||e.__e==null||ze(e.__e),e.__e=e.__d=void 0}function r0(e,t,o){return this.constructor(e,o)}function ve(e,t,o){var r,a,n;k.__&&k.__(e,t),a=(r=typeof o=="function")?null:o&&o.__k||t.__k,n=[],ke(t,e=(!r&&o||t).__k=d(N,null,[e]),a||te,te,t.ownerSVGElement!==void 0,!r&&o?[o]:a?null:t.firstChild?K.call(t.childNodes):null,n,!r&&o?o:a?a.__e:t.firstChild,r),tt(n,e)}function ge(e,t,o){var r,a,n,s=P({},e.props);for(n in t)n=="key"?r=t[n]:n=="ref"?a=t[n]:s[n]=t[n];return arguments.length>2&&(s.children=arguments.length>3?K.call(arguments,2):o),$(e.type,s,r||e.key,a||e.ref,null)}function ne(e,t){var o={__c:t="__cC"+qe++,__:e,Consumer:function(r,a){return r.children(a)},Provider:function(r){var a,n;return this.getChildContext||(a=[],(n={})[t]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&a.some(he)},this.sub=function(s){a.push(s);var i=s.componentWillUnmount;s.componentWillUnmount=function(){a.splice(a.indexOf(s),1),i&&i.call(s)}}),r.children}};return o.Provider.__=o.Consumer.contextType=o}K=Ye.slice,k={__e:function(e,t){for(var o,r,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((r=o.constructor)&&r.getDerivedStateFromError!=null&&(o.setState(r.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e),a=o.__d),a)return o.__E=o}catch(n){e=n}throw e}},Ge=0,Zt=function(e){return e!=null&&e.constructor===void 0},T.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=P({},this.state),typeof e=="function"&&(e=e(P({},o),this.props)),e&&P(o,e),e!=null&&this.__v&&(t&&this.__h.push(t),he(this))},T.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),he(this))},T.prototype.render=N,X=[],Ve=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,oe.__r=0,qe=0;var n0={};function nt(e,t){for(var o in t)e[o]=t[o];return e}function at(e,t,o){var r=/(?:\?([^#]*))?(#.*)?$/,a=e.match(r),n={},s;if(a&&a[1])for(var i=a[1].split("&"),l=0;l<i.length;l++){var u=i[l].split("=");n[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=ye(e.replace(r,"")),t=ye(t||"");for(var c=Math.max(e.length,t.length),m=0;m<c;m++)if(t[m]&&t[m].charAt(0)===":"){var p=t[m].replace(/(^:|[+*?]+$)/g,""),f=(t[m].match(/[+*?]+$/)||n0)[0]||"",_=~f.indexOf("+"),g=~f.indexOf("*"),h=e[m]||"";if(!h&&!g&&(f.indexOf("?")<0||_)){s=!1;break}if(n[p]=decodeURIComponent(h),_||g){n[p]=e.slice(m).map(decodeURIComponent).join("/");break}}else if(t[m]!==e[m]){s=!1;break}return o.default!==!0&&s===!1?!1:n}function a0(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function s0(e,t){return e.index=t,e.rank=l0(e),e.props}function ye(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function i0(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}function c0(e){return ye(e).map(i0).join("")}function l0(e){return e.props.default?0:c0(e.props.path)}var S=null,V=[],xe=[],u0={};function p0(e,t){t===void 0&&(t="push"),S&&S[t]?S[t](e):typeof history!="undefined"&&history[t+"State"]&&history[t+"State"](null,null,e)}function be(){var e;return S&&S.location?e=S.location:S&&S.getCurrentLocation?e=S.getCurrentLocation():e=typeof location!="undefined"?location:u0,""+(e.pathname||"")+(e.search||"")}function st(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),f0(e)&&p0(e,t?"replace":"push"),it(e)}function f0(e){for(var t=V.length;t--;)if(V[t].canRoute(e))return!0;return!1}function it(e){for(var t=!1,o=0;o<V.length;o++)V[o].routeTo(e)===!0&&(t=!0);for(var r=xe.length;r--;)xe[r](e);return t}function ct(e){if(!(!e||!e.getAttribute)){var t=e.getAttribute("href"),o=e.getAttribute("target");if(!(!t||!t.match(/^\//g)||o&&!o.match(/^_?self$/i)))return st(t)}}function m0(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0))return ct(e.currentTarget||e.target||this),lt(e)}function lt(e){return e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault()),!1}function d0(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)){var t=e.target;do if(String(t.nodeName).toUpperCase()==="A"&&t.getAttribute("href")){if(t.hasAttribute("native"))return;if(ct(t))return lt(e)}while(t=t.parentNode)}}var ut=!1;function _0(){ut||(typeof addEventListener=="function"&&(S||addEventListener("popstate",function(){it(be())}),addEventListener("click",d0)),ut=!0)}var A=function(e){function t(o){e.call(this,o),o.history&&(S=o.history),this.state={url:o.url||be()},_0()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.shouldComponentUpdate=function(r){return r.static!==!0?!0:r.url!==this.props.url||r.onChange!==this.props.onChange},t.prototype.canRoute=function(r){var a=U(this.props.children);return this.getMatchingChildren(a,r,!1).length>0},t.prototype.routeTo=function(r){this.setState({url:r});var a=this.canRoute(r);return this.updating||this.forceUpdate(),a},t.prototype.componentWillMount=function(){V.push(this),this.updating=!0},t.prototype.componentDidMount=function(){var r=this;S&&(this.unlisten=S.listen(function(a){r.routeTo(""+(a.pathname||"")+(a.search||""))})),this.updating=!1},t.prototype.componentWillUnmount=function(){typeof this.unlisten=="function"&&this.unlisten(),V.splice(V.indexOf(this),1)},t.prototype.componentWillUpdate=function(){this.updating=!0},t.prototype.componentDidUpdate=function(){this.updating=!1},t.prototype.getMatchingChildren=function(r,a,n){return r.filter(s0).sort(a0).map(function(s){var i=at(a,s.props.path,s.props);if(i){if(n!==!1){var l={url:a,matches:i};return nt(l,i),delete l.ref,delete l.key,ge(s,l)}return s}}).filter(Boolean)},t.prototype.render=function(r,a){var n=r.children,s=r.onChange,i=a.url,l=this.getMatchingChildren(U(n),i,!0),u=l[0]||null,c=this.previousUrl;return i!==c&&(this.previousUrl=i,typeof s=="function"&&s({router:this,url:i,previous:c,active:l,current:u})),u},t}(T),h0=function(e){return d("a",nt({onClick:m0},e))},Ie=function(e){return d(e.component,e)};A.subscribers=xe;A.getCurrentUrl=be;A.route=st;A.Router=A;A.Route=Ie;A.Link=h0;A.exec=at;var pt=A;var Q,B,ft,ae=0,Ce=[],mt=k.__b,dt=k.__r,_t=k.diffed,ht=k.__c,kt=k.unmount;function se(e,t){k.__h&&k.__h(B,e,ae||t),ae=0;var o=B.__H||(B.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function ie(e){return ae=1,ce(yt,e)}function ce(e,t,o){var r=se(Q++,2);return r.t=e,r.__c||(r.__=[o?o(t):yt(void 0,t),function(a){var n=r.t(r.__[0],a);r.__[0]!==n&&(r.__=[n,r.__[1]],r.__c.setState({}))}],r.__c=B),r.__}function j(e,t){var o=se(Q++,3);!k.__s&&gt(o.__H,t)&&(o.__=e,o.__H=t,B.__H.__h.push(o))}function q(e){return ae=5,H(function(){return{current:e}},[])}function H(e,t){var o=se(Q++,7);return gt(o.__H,t)&&(o.__=e(),o.__H=t,o.__h=e),o.__}function Me(e){var t=B.context[e.__c],o=se(Q++,9);return o.c=e,t?(o.__==null&&(o.__=!0,t.sub(B)),t.props.value):e.__}function k0(){Ce.forEach(function(e){if(e.__P)try{e.__H.__h.forEach(le),e.__H.__h.forEach(Be),e.__H.__h=[]}catch(t){e.__H.__h=[],k.__e(t,e.__v)}}),Ce=[]}k.__b=function(e){B=null,mt&&mt(e)},k.__r=function(e){dt&&dt(e),Q=0;var t=(B=e.__c).__H;t&&(t.__h.forEach(le),t.__h.forEach(Be),t.__h=[])},k.diffed=function(e){_t&&_t(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(Ce.push(t)!==1&&ft===k.requestAnimationFrame||((ft=k.requestAnimationFrame)||function(o){var r,a=function(){clearTimeout(n),vt&&cancelAnimationFrame(r),setTimeout(o)},n=setTimeout(a,100);vt&&(r=requestAnimationFrame(a))})(k0)),B=null},k.__c=function(e,t){t.some(function(o){try{o.__h.forEach(le),o.__h=o.__h.filter(function(r){return!r.__||Be(r)})}catch(r){t.some(function(a){a.__h&&(a.__h=[])}),t=[],k.__e(r,o.__v)}}),ht&&ht(e,t)},k.unmount=function(e){kt&&kt(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(le)}catch(o){k.__e(o,t.__v)}};var vt=typeof requestAnimationFrame=="function";function le(e){var t=B;typeof e.__c=="function"&&e.__c(),B=t}function Be(e){var t=B;e.__c=e.__(),B=t}function gt(e,t){return!e||e.length!==t.length||t.some(function(o,r){return o!==e[r]})}function yt(e,t){return typeof t=="function"?t(e):t}var M=e=>Math.round(e)+.5,x=e=>{let t=e.current,o=t.getContext("2d");return{canvas:t,ctx:o}},F=(e,t)=>{let o=e.getBoundingClientRect(),r=t.clientX-o.left,a=t.clientY-o.top;return{x:r,y:a}};var Oe=(e,t,o)=>e*(1-o)+t*o,v0=(e,t,o)=>ue((o-e)/(t-e)),ue=(e,t=0,o=1)=>Math.min(o,Math.max(t,e)),J=(e,t,o,r,a)=>Oe(o,r,v0(e,t,a));var Te=e=>{let t=e[0],o=e[0],r=e[0],a=e[0];for(let n of e)o.openTime<n.openTime&&(o=n),t.openTime>n.openTime&&(t=n),a.spark.close<n.spark.close&&(a=n),r.spark.close>n.spark.close&&(r=n);return{minX:t,maxX:o,minY:r,maxY:a}},pe=(e,t,o)=>{let{minX:r,maxX:a,minY:n,maxY:s}=Te(o),i=0,l=0;return{ipl:o.map(c=>{let m={...c};m.spark={...c.spark};let p=J(r.openTime,a.openTime,i,t-i,c.openTime);return m.openTime=M(p),Object.keys(m.spark).forEach(f=>{let _=f,g=J(n.spark.low,s.spark.high,l,e-l,c.spark[_]);m.spark[_]=M(e-g)}),m}),minX:r,maxX:a,minY:n,maxY:s}},xt=(e,t,o)=>{let r=t[0],a=o[0];for(let n=0;n<t.length;n++){let s=Math.abs(e-t[n].openTime),i=Math.abs(e-r.openTime);s<i&&(r=t[n],a=o[n])}return{iplHover:r,itemHover:a}},g0=e=>{let t=e[0],o=e[0],r=e[0],a=e[0];for(let n of e)o.totalVolume<n.totalVolume&&(o=n),t.totalVolume>n.totalVolume&&(t=n),a.totalPercent<n.totalPercent&&(a=n),r.totalPercent>n.totalPercent&&(r=n);return{minX:t,maxX:o,minY:r,maxY:a}},fe=(e,t,o)=>{let{minX:r,maxX:a,minY:n,maxY:s}=g0(o);return{ipl:o.map(l=>{let u={...l},c=J(r.totalVolume,a.totalVolume,0,t,l.totalVolume);u.totalVolume=M(c);let m=J(n.totalPercent,s.totalPercent,0,e,l.totalPercent);return u.totalPercent=M(m),u}),minX:r,maxX:a,minY:n,maxY:s}},me=(e,t,o)=>{let r=t[0],a=o[0];for(let n=0;n<t.length;n++){let s=Math.abs(e-t[n].totalPercent),i=Math.abs(e-r.totalPercent);s<i&&(r=t[n],a=o[n])}return{iplHover:r,itemHover:a}};var bt=(e,t=4)=>{let o=e.toString().split(".")[0];return e.toFixed(t-o.length)},It=e=>{if(e<1e3)return e;if(e>=1e3&&e<1e6)return+(e/1e3).toFixed(1)+"K";if(e>=1e6&&e<1e9)return+(e/1e6).toFixed(1)+"M";if(e>=1e9&&e<1e12)return+(e/1e9).toFixed(1)+"B"};var Z;(function(o){o.Long="long",o.Short="short"})(Z||(Z={}));var y0=(e,t=6)=>bt(e,t),x0=(e,t)=>{let o=(t.close-e.close)/e.close*100,r=o>0?Z.Long:Z.Short;return{percent:`${o>0?"+":"-"}${Math.abs(o).toFixed(2)}%`,trend:r}},b0=e=>{let t=0;for(let o=0;o<e.length;o++)t+=e[o].volume;return t},Ct=e=>{let{minX:t,maxX:o}=Te(e),r=y0(o.spark.close),a=It(b0(e)),{percent:n,trend:s}=x0(t.spark,o.spark),i=`var(--clr-${s})`;return{price:r,volume:a,percent:n,trend:s,color:i}};var I0=(e,t,o)=>{let{ipl:r}=pe(t,e,o);return r.map(a=>{let{openTime:n,spark:{close:s}}=a;return n+","+s}).join(" ")},Se=({state:e})=>{let{key:t,name:o,rank:r,items:a}=e,n=500,s=100,i=`0 0 ${n} ${s}`,l=I0(n,s,a),{price:u,volume:c,trend:m,percent:p,color:f}=Ct(a);return d("div",{className:`market-box market-box--${m}`},d("div",{className:"market-box__title"},d("span",{className:"title--token"},o," (",t,")"),d("span",{className:"title--rank",style:{color:f}},"#",r)),d("div",{className:"market-box__price"},d("span",{className:"price--text"},u),d("span",{className:"price--change",style:{color:f}},p)),d("div",{className:"market-box__volume"},d("span",{className:"clr-text-weak"},"Volume"),d("span",{className:"volume--percent"},c)),d("svg",{className:"market-box__svg",viewBox:i,style:{width:"100%"}},d("polyline",{fill:"none",stroke:f,strokeLinejoin:"round","stroke-width":"2",points:l})))};function M0(e,t){for(var o in t)e[o]=t[o];return e}function we(e,t){for(var o in e)if(o!=="__source"&&!(o in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Mt(e){this.props=e}function Bt(e,t){function o(a){var n=this.props.ref,s=n==a.ref;return!s&&n&&(n.call?n(null):n.current=null),t?!t(this.props,a)||!s:we(this.props,a)}function r(a){return this.shouldComponentUpdate=o,d(e,a)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Mt.prototype=new T).isPureReactComponent=!0,Mt.prototype.shouldComponentUpdate=function(e,t){return we(this.props,e)||we(this.state,t)};var Ot=k.__b;k.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ot&&Ot(e)};var ho=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;var B0=k.__e;k.__e=function(e,t,o){if(e.then){for(var r,a=t;a=a.__;)if((r=a.__c)&&r.__c)return t.__e==null&&(t.__e=o.__e,t.__k=o.__k),r.__c(e,t)}B0(e,t,o)};var Tt=k.unmount;function Ee(){this.__u=0,this.t=null,this.__b=null}function St(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function de(){this.u=null,this.o=null}k.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),Tt&&Tt(e)},(Ee.prototype=new T).__c=function(e,t){var o=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(o);var a=St(r.__v),n=!1,s=function(){n||(n=!0,o.__R=null,a?a(i):i())};o.__R=s;var i=function(){if(!--r.__u){if(r.state.__e){var u=r.state.__e;r.__v.__k[0]=function m(p,f,_){return p&&(p.__v=null,p.__k=p.__k&&p.__k.map(function(g){return m(g,f,_)}),p.__c&&p.__c.__P===f&&(p.__e&&_.insertBefore(p.__e,p.__d),p.__c.__e=!0,p.__c.__P=_)),p}(u,u.__c.__P,u.__c.__O)}var c;for(r.setState({__e:r.__b=null});c=r.t.pop();)c.forceUpdate()}},l=t.__h===!0;r.__u++||l||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(s,s)},Ee.prototype.componentWillUnmount=function(){this.t=[]},Ee.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var o=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function n(s,i,l){return s&&(s.__c&&s.__c.__H&&(s.__c.__H.__.forEach(function(u){typeof u.__c=="function"&&u.__c()}),s.__c.__H=null),(s=M0({},s)).__c!=null&&(s.__c.__P===l&&(s.__c.__P=i),s.__c=null),s.__k=s.__k&&s.__k.map(function(u){return n(u,i,l)})),s}(this.__b,o,r.__O=r.__P)}this.__b=null}var a=t.__e&&d(N,null,e.fallback);return a&&(a.__h=null),[d(N,null,t.__e?null:e.children),a]};var wt=function(e,t,o){if(++o[1]===o[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(o=e.u;o;){for(;o.length>3;)o.pop()();if(o[1]<o[0])break;e.u=o=o[2]}};(de.prototype=new T).__e=function(e){var t=this,o=St(t.__v),r=t.o.get(e);return r[0]++,function(a){var n=function(){t.props.revealOrder?(r.push(a),wt(t,e,r)):a()};o?o(n):n()}},de.prototype.render=function(e){this.u=null,this.o=new Map;var t=U(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var o=t.length;o--;)this.o.set(t[o],this.u=[1,0,this.u]);return e.children},de.prototype.componentDidUpdate=de.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,o){wt(e,o,t)})};var O0=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,T0=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,S0=typeof document!="undefined",w0=function(e){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};T.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(T.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Et=k.event;function E0(){}function R0(){return this.cancelBubble}function D0(){return this.defaultPrevented}k.event=function(e){return Et&&(e=Et(e)),e.persist=E0,e.isPropagationStopped=R0,e.isDefaultPrevented=D0,e.nativeEvent=e};var H0,Rt={configurable:!0,get:function(){return this.class}},Dt=k.vnode;k.vnode=function(e){var t=e.type,o=e.props,r=o;if(typeof t=="string"){var a=t.indexOf("-")===-1;for(var n in r={},o){var s=o[n];S0&&n==="children"&&t==="noscript"||n==="value"&&"defaultValue"in o&&s==null||(n==="defaultValue"&&"value"in o&&o.value==null?n="value":n==="download"&&s===!0?s="":/ondoubleclick/i.test(n)?n="ondblclick":/^onchange(textarea|input)/i.test(n+t)&&!w0(o.type)?n="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(n)?n=n.toLowerCase():a&&T0.test(n)?n=n.replace(/[A-Z0-9]/,"-$&").toLowerCase():s===null&&(s=void 0),r[n]=s)}t=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=U(o.children).forEach(function(i){i.props.selected=r.value.indexOf(i.props.value)!=-1})),t=="select"&&r.defaultValue!=null&&(r.value=U(o.children).forEach(function(i){i.props.selected=r.multiple?r.defaultValue.indexOf(i.props.value)!=-1:r.defaultValue==i.props.value})),e.props=r}t&&o.class!=o.className&&(Rt.enumerable="className"in o,o.className!=null&&(r.class=o.className),Object.defineProperty(r,"className",Rt)),e.$$typeof=O0,Dt&&Dt(e)};var Ht=k.__r;k.__r=function(e){Ht&&Ht(e),H0=e.__c};var z=Bt(({id:e,canvasRef:t,height:o,width:r,events:a})=>(j(()=>{let{ctx:n}=x(t);console.log("[canvas]: mounted",e),n.translate(.5,.5),n.translate(-.5,-.5),a?.onLoad&&a.onLoad()}),d("canvas",{id:e,tabIndex:0,height:o,width:r,ref:t,...a})),(e,t)=>!0);var Pt=(e,t,o,r)=>{let{canvas:a,ctx:n}=x(e);[t,o].forEach((s,i)=>{let l=i>0,u=r[s.index],c=l?s.spark.high:s.spark.low,m=Math.round(c).toString(),{width:p}=n.measureText(m),f=5,_=a.height*.1,g=u.openTime;g=ue(g,f,a.width-p-f);let h=u.spark.close;h=ue(l?h+_:h-_,5,a.height),console.log(g),n.fillStyle="#fff",n.font="12px Hack, monospace",n.fillText(Math.round(c).toString(),g,h)})};var _e={},C=e=>(_e[e]||(_e[e]=window.getComputedStyle(document.body).getPropertyValue(e)),_e[e]);var At=(e,t,o,r)=>{let{ctx:a}=x(e),n=C("--clr-rgba-long-20"),s=C("--clr-rgba-short-20"),i=10,l=(m,p)=>{a.beginPath(),a.strokeStyle="#cecece",a.arc(m,p,3,0,2*Math.PI),a.stroke()},{drawActive:u,drawHistory:c}=t;for(let m of[u,...c]){if(m.hidden||!m.start)continue;let{active:p,start:f,end:_}=m,[g,h]=[M(f.x),M(f.y)],[v,y]=[M(_.x),M(_.y)];if(!(Math.abs(g-v)<i||Math.abs(h-y)<i)){if(l(g,h),l(v,y),p){let[b,I]=[o-g,r-h];a.fillStyle=I<0?n:s,a.fillRect(g,h,b,I)}else if(!p){let[b,I]=[g-v,h-y];a.fillStyle=I>0?n:s,a.fillRect(v,y,b,I)}}}};var Lt=(e,t,o)=>{if(o==0)return;let{canvas:r,ctx:a}=x(e),{height:n,width:s}=r,i=C("--clr-text-bg-40"),l=t.openTime,u=M(o);a.beginPath(),a.moveTo(l,u),a.lineTo(l,M(n)),a.moveTo(l,u),a.lineTo(0,u),a.moveTo(l,u),a.lineTo(l,0),a.moveTo(l,u),a.lineTo(s,u),a.strokeStyle=i,a.lineWidth=1,a.stroke()};var Nt=(e,t)=>{let{canvas:o,ctx:r}=x(e),a=C("--clr-guide"),n=()=>{for(let i=0;i<t.length;i++){if(r.globalCompositeOperation="destination-over",r.setLineDash([2,2]),i!==0&&i%5!=0)continue;let{openTime:l}=t[i];r.beginPath(),r.moveTo(l,0),r.lineTo(l,M(o.height)),r.lineWidth=1,r.strokeStyle=a,r.stroke(),r.globalCompositeOperation="source-over",r.setLineDash([0,0])}},s=()=>{for(let i=1;i<=10;i++){let l=Oe(1,o.height-1,i/10);r.globalCompositeOperation="destination-over",r.setLineDash([2,2]),r.beginPath(),r.moveTo(0,l),r.lineTo(o.width,M(l)),r.lineWidth=1,r.strokeStyle=a,r.stroke(),r.globalCompositeOperation="source-over",r.setLineDash([0,0])}};n(),s()};var Ut=(e,t)=>{let{ctx:o}=x(e),r=C("--clr-textWeak"),a=C("--clr-textStrong"),s=(()=>{let l=new Date(t.openTime).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),{width:u}=o.measureText(l);return o.fillStyle="#cecece",o.font="12px Hack, monospace",o.fillText(l,0,20),u})();(()=>{o.font="12px Hack, monospace";let l=0;Object.keys(t.spark).forEach(u=>{let c=u,m=u[0].toUpperCase(),p=Math.round(t.spark[c]).toString(),f=m+p;l+=o.measureText(f).width+15,o.fillStyle=r,o.fillText(m,l+s,20),o.fillStyle=a,o.fillText(p,l+s+10,20)})})()};var Ft=(e,t,o)=>{let{ctx:r}=x(e),a=C("--clr-textStrong"),n=t.indexOf(o);n=n==0?t.length-1:n-1;let s=t[n].spark.close,i=o.spark.close,u=((i-s)/i*100).toFixed(3).padStart(6,"+")+"%";r.fillStyle=a,r.fillText(u,100*5,20)};var Wt=(e,t,o,r=0,a=0)=>{let{canvas:n,ctx:s}=x(e);s.clearRect(0,0,n.width,n.height);let i=C("--clr-rgba-ctaHighlight-80"),l=C("--clr-rgba-ctaHighlight-0"),{ipl:u,minX:c,maxX:m}=pe(n.height,n.width,o),p={};u.forEach(h=>p[h.index]=h),At(e,t,r,a),Pt(e,c,m,p);let f=(h,v)=>{let{openTime:y,spark:{close:b}}=h;v&&s.moveTo(y,b),s.lineTo(y,b)};u.forEach((h,v)=>{if(v==0){s.beginPath(),f(h,!0);return}if(f(h),v==u.length-1){s.strokeStyle="#eee",s.lineWidth=1,s.stroke(),s.lineTo(p[m.index].openTime,n.height),s.lineTo(p[c.index].openTime,n.height),s.globalCompositeOperation="destination-over";let y=s.createLinearGradient(0,0,0,n.height);y.addColorStop(.05,i),y.addColorStop(1,l),s.fillStyle=y,s.fill(),s.globalCompositeOperation="source-over"}});let{iplHover:_,itemHover:g}=xt(r,u,o);Lt(e,_,a),Ut(e,g),Nt(e,u),Ft(e,o,g)};var Gt=({items:e})=>{let t=q({}),o={drawHistory:[],drawActive:{},history:0,zoom:0},r=(s=0,i=0)=>{Wt(t,o,e.slice(o.zoom),s,i)},a={onLoad:function(){r()},onMouseMove:function(s){let{canvas:i}=x(t),{x:l,y:u}=F(i,s);r(l,u)},onMouseDown:function(s){let{canvas:i}=x(t),{x:l,y:u}=F(i,s);o.drawActive={...o.drawActive,active:!0,hidden:!1,start:{x:l,y:u},end:{x:0,y:0}}},onMouseUp:function(s){let{canvas:i}=x(t),{x:l,y:u}=F(i,s);o.drawActive={...o.drawActive,active:!1,end:{x:l,y:u}},o.drawHistory.push(o.drawActive)},onWheel:function(s){s.preventDefault();let i=2;o.zoom+=s.deltaY<0?i:-i;let l=0,u=e.length-5;o.zoom<l?o.zoom=l:o.zoom>u&&(o.zoom=u),r()},onKeyDown:function(s){if(!s.ctrlKey)return;let{history:i}=o,l=o.drawHistory.length-1;switch(s.key){case"z":if(i>=0){let u=l-o.history;o.drawHistory[u].hidden=!0,o.history=i>=l?l:i+1}break;case"y":if(i>=0&&l){let u=l-o.history;o.drawHistory[u].hidden=!1,o.history=i==l?l:i-1}break}r()}},n=H(()=>a,[]);return d(z,{id:"candle-chart",height:300,width:600,canvasRef:t,events:n})};var Re=(e,t)=>{let o=[],r=0,a=0,n=0;for(let s=0;s<e.length;s++){let{price:i,volume:l,long:u}=e[s];a+=i,n+=l;let c=r.toFixed(1).split(""),m=i.toFixed(1).split(""),p=0;for(let _=0;_<m.length;_++)if(c[_]!==m[_]){p=_;break}let f=Math.abs((t-a)/t);o.push({price:i,volume:l,totalPercent:Number(f.toFixed(8)),totalVolume:n,long:u,mirrored:0,significant:l>.15,hlight:p,index:s}),r=i}return o},Vt=(e,t)=>{for(let o=0;o<e.length;o++){let r=e[o];for(let a=0;a<t.length;a++){let n=t[o];r.totalPercent>=n.totalPercent&&(r.mirrored=n.price,n.mirrored=r.price)}}};var E;(function(r){r[r.None=0]="None",r[r.AddOrderBook=1]="AddOrderBook",r[r.HoverEntry=2]="HoverEntry"})(E||(E={}));var R;(function(a){a[a.BookAsks=0]="BookAsks",a[a.BookBids=1]="BookBids",a[a.GraphAsks=2]="GraphAsks",a[a.GraphBids=3]="GraphBids"})(R||(R={}));var jt=(e,t)=>{let{sender:o}=t;switch(t.cmd){case E.HoverEntry:let{hover:r}=t;return{...e,sender:o,hover:r};case E.AddOrderBook:let{book:a}=t;return{...e,sender:o,book:a}}};var qt=ne({}),P0={book:{},hover:{}},Yt=({children:e})=>{let[t,o]=ce(jt,P0),r={state:t,dispatch:o};return d(qt.Provider,{value:r},e)},W=()=>{let e=Me(qt);if(e===void 0)throw new Error("useOrderBook must be used within <OrderBookStore>");return e};var zt=(e,t)=>{let{dispatch:o}=W();return H(()=>({onMouseOver(){o({cmd:E.HoverEntry,sender:e,hover:t})}}),[])};var Kt=({sender:e,item:t,hover:o})=>{let r=zt(e,t),{price:a,volume:n,totalVolume:s,long:i,hlight:l,significant:u}=t,c=`clr-${i?"long":"short"}-fill`,m=`clr-${i?"long":"short"}-highlight`,p=a.toFixed(1).split(""),f=n.toFixed(4),_=s.toFixed(4),h=((y,b)=>y?y.price===b||y.mirrored===b:!1)(o,a)?"order-list-entry--hover":"";return d("li",{...r,className:`order-list-entry ${h} ${u?"order-list-entry--significant":""}`},d("div",{className:"order-list-entry-price"},d("span",{className:c},p.slice(0,l).join("")),d("span",{className:m},p.slice(l).join(""))),d("div",{className:"order-list-entry-amount"},d("span",{className:"clr-text-strong"},f[0]),d("span",{className:"clr-text-weak"},f.slice(1))),d("div",{className:"order-list-entry-total-amount"},d("span",{className:"clr-text-weak"},_[0]),d("span",{className:"clr-text-strong"},_.slice(1))))},Xt=({asks:e,bids:t})=>{let{state:o}=W();e=e.sort((a,n)=>a.price-n.price),t=t.sort((a,n)=>n.price-a.price);let r=(e[0].price+t[0].price)/2;return e=Re(e,r).slice(0,20),t=Re(t,r).slice(0,20),Vt(e,t),o.book={asks:[...e],bids:[...t]},e.reverse(),d("div",{className:"order-book"},d("div",{className:"order-book-list order-book-list--bids"},d("ul",null,e.map(a=>d(Kt,{sender:R.BookAsks,item:a,hover:o.hover})))),d("div",{className:"order-book-last-price"},r),d("div",{className:"order-book-list order-book-list--asks"},d("ul",null,t.map(a=>d(Kt,{sender:R.BookBids,item:a,hover:o.hover})))))};var ee=(e,t,o=0,r={},a=!1)=>{let{canvas:{height:n,width:s},ctx:i}=x(e);i.clearRect(0,0,s,n);let l=C("--clr-long"),u=C("--clr-short"),c=C("--clr-long-bg-50"),m=C("--clr-short-bg-50"),p=C("--clr-rgba-bg-50"),f=(g,h)=>{i.beginPath(),i.setLineDash([2,2]),i.lineCap="round",i.lineWidth=1;for(let v=0;v<h.length;v++){if(!g[v].significant)continue;let{totalVolume:y,totalPercent:b,long:I}=g[v];i.moveTo(.5,b),i.lineTo(I?s-y:y,M(b)),i.strokeStyle=I?c:m,i.stroke()}i.stroke(),i.setLineDash([0,0])};return(g=>{let{ipl:h}=fe(n,s,g),v={};Object.keys(r).length&&(a?v=h[h.length-1-r.index]:v=h[r.index]),v.index||(v=me(o,h,g).iplHover);let{long:y}=g[0],b=s-v.totalVolume,I=v.totalPercent;return f(h,g),((w,D,L)=>{i.beginPath(),i.setLineDash([2,2]),i.lineCap="round",i.lineWidth=1,i.strokeStyle=L?l:u,w=L?w:s-w,i.moveTo(w,D),i.lineTo(w,L?.5:n),i.moveTo(w,D),i.lineTo(.5,D),i.stroke(),i.setLineDash([0,0])})(b,I,y),((w,D,L)=>{i.beginPath(),w=L?w:s-w,i.lineWidth=3,i.fillStyle=L?l:u,i.arc(w,D,3,0,2*Math.PI),i.fill()})(b,I,y),((w,D,L)=>{i.beginPath(),L?(i.moveTo(s,D),i.lineTo(s,M(n)),i.lineTo(0,M(n)),i.lineTo(0,D)):(i.moveTo(s,D),i.lineTo(s,0),i.lineTo(0,0),i.lineTo(0,D)),i.fillStyle=p,i.fill()})(b,I,y),v})(t)};var De=({long:e})=>{let{state:t,dispatch:o}=W(),r=q({}),a=e?t.book.bids:t.book.asks,n=e?R.GraphAsks:R.GraphBids;j(()=>{t.sender!==n&&(t.hover.long!==e?ee(r,a,0,t.hover,!0):t.hover.long==e&&ee(r,a,0,t.hover,!1))},[t]);let s={onLoad:function(){ee(r,a)},onMouseMove:function(l){let{canvas:u}=x(r),{y:c}=F(u,l),m=ee(r,a,c);o({cmd:E.HoverEntry,sender:n,hover:m})}},i=H(()=>s,[]);return d(z,{id:"depth-axis",height:400,width:200,canvasRef:r,events:i})};var He=(e,t,o=0)=>{let{canvas:{height:r,width:a},ctx:n}=x(e);n.clearRect(0,0,a,r);let s=C("--clr-short"),i=C("--clr-long"),l=C("--clr-short-bg-20"),u=C("--clr-long-bg-20");return(m=>{let{ipl:p}=fe(r,a,m),{iplHover:f}=me(o,p,m),{long:_}=m[0];for(let g=0;g<p.length;g++){if(g==0)continue;let h=p[g-1],v=p[g],y=h.totalVolume,b=v.totalVolume,I=h.totalPercent,G=v.totalPercent;_&&(y=a-y,b=a-b),n.beginPath(),n.lineCap="round",n.moveTo(y,I),n.lineTo(b,I),n.lineTo(b,G),n.lineWidth=1,n.strokeStyle=_?i:s,n.stroke(),n.globalCompositeOperation="destination-over",_?n.lineTo(r,r):n.lineTo(r,0),n.fillStyle=_?u:l,n.strokeStyle=n.fillStyle,n.stroke(),n.fill(),n.globalCompositeOperation="source-over",n.closePath()}return f})(t)};var Pe=({long:e})=>{let{state:{book:t},dispatch:o}=W(),r=q({}),a=e?t.bids:t.asks,n=e?R.GraphAsks:R.GraphBids,s={onLoad:function(){He(r,a)},onMouseMove:function(l){let{canvas:u}=x(r),{x:c}=F(u,l),m=He(r,a,c);o({cmd:E.HoverEntry,sender:n,hover:m})}},i=H(()=>s,[]);return d(z,{id:"depth-graph",height:400,width:200,canvasRef:r,events:i})};var Ae=(e,t)=>e.map(o=>{let r=o.map(s=>Number(s)),[a,n]=r;return{price:a,volume:n,long:t}});var Le={lastUpdateId:14730815480,bids:[["62054.41000000","0.02967000"],["62052.42000000","0.01000000"],["62050.11000000","0.00400000"],["62048.40000000","0.10057000"],["62048.20000000","0.18750000"],["62048.15000000","0.06735000"],["62046.65000000","0.02000000"],["62046.54000000","0.00161000"],["62043.56000000","0.04000000"],["62043.52000000","0.00032000"],["62043.21000000","0.04027000"],["62042.37000000","0.09786000"],["62041.72000000","0.18750000"],["62041.29000000","0.23000000"],["62040.65000000","0.00806000"],["62040.44000000","0.00032000"],["62040.01000000","0.06284000"],["62039.54000000","0.00514000"],["62038.48000000","0.03000000"],["62037.77000000","0.05000000"],["62037.36000000","0.00032000"],["62035.35000000","0.08053000"],["62034.72000000","0.51058000"],["62034.28000000","0.00032000"],["62034.12000000","0.18750000"],["62032.87000000","0.03222000"],["62032.15000000","0.00298000"],["62032.05000000","0.01829000"],["62031.20000000","0.00032000"],["62030.35000000","0.05000000"],["62030.19000000","0.01318000"],["62029.37000000","0.21639000"],["62029.13000000","0.10000000"],["62028.33000000","0.30810000"],["62028.19000000","0.18530000"],["62028.12000000","0.00032000"],["62026.44000000","0.03130000"],["62025.38000000","0.23558000"],["62025.37000000","0.08203000"],["62025.04000000","0.00032000"],["62024.42000000","0.18750000"],["62023.51000000","0.20000000"],["62023.35000000","0.01000000"],["62022.93000000","0.10000000"],["62021.96000000","0.00032000"],["62019.74000000","0.00295000"],["62018.88000000","0.00032000"],["62018.21000000","0.18750000"],["62015.80000000","0.00032000"],["62014.04000000","0.00413000"],["62013.41000000","0.24677000"],["62013.40000000","0.57941000"],["62012.72000000","0.00032000"],["62012.53000000","0.00441000"],["62012.43000000","0.12081000"],["62011.72000000","0.20217000"],["62011.46000000","0.06287000"],["62011.34000000","0.03439000"],["62011.33000000","0.18750000"],["62011.20000000","0.02155000"],["62011.14000000","0.20000000"],["62011.08000000","0.04000000"],["62009.64000000","0.00032000"],["62009.15000000","0.06287000"],["62008.83000000","0.40000000"],["62006.57000000","0.56014000"],["62006.56000000","1.60032000"],["62006.25000000","0.04794000"],["62003.48000000","0.00032000"],["62002.97000000","0.20000000"],["62002.93000000","0.18750000"],["62002.54000000","0.01516000"],["62000.40000000","0.00032000"],["62000.02000000","0.26807000"],["62000.01000000","0.00907000"],["62000.00000000","0.00090000"],["61999.59000000","0.57369000"],["61999.57000000","0.02000000"],["61999.53000000","0.00100000"],["61999.40000000","0.16107000"],["61998.54000000","0.94700000"],["61997.32000000","0.00032000"],["61995.75000000","0.00076000"],["61995.54000000","0.03322000"],["61994.31000000","0.00413000"],["61994.24000000","0.00032000"],["61993.79000000","0.91851000"],["61993.78000000","0.18750000"],["61992.91000000","0.02300000"],["61991.16000000","0.00032000"],["61990.38000000","2.85000000"],["61989.59000000","0.00464000"],["61988.08000000","0.00032000"],["61985.65000000","0.04840000"],["61985.61000000","0.25223000"],["61985.60000000","0.18750000"],["61985.00000000","0.00032000"],["61984.19000000","0.69499000"],["61983.79000000","0.00413000"],["61982.79000000","0.03150000"]],asks:[["62054.42000000","0.21685000"],["62054.86000000","0.01379000"],["62057.49000000","0.14000000"],["62059.03000000","0.07169000"],["62059.04000000","0.18000000"],["62060.00000000","0.10517000"],["62061.21000000","0.00150000"],["62063.70000000","0.18750000"],["62065.53000000","0.00464000"],["62065.84000000","0.02000000"],["62066.00000000","0.01000000"],["62066.27000000","0.02716000"],["62067.99000000","0.14209000"],["62068.00000000","0.40538000"],["62068.79000000","0.00033000"],["62069.06000000","0.16090000"],["62069.17000000","0.06284000"],["62069.18000000","0.00026000"],["62070.00000000","0.01000000"],["62070.21000000","0.18750000"],["62070.73000000","0.02000000"],["62070.86000000","0.01000000"],["62071.17000000","0.06287000"],["62071.24000000","0.00032000"],["62071.99000000","0.20030000"],["62072.00000000","0.04000000"],["62072.74000000","0.24389000"],["62072.78000000","0.02000000"],["62072.88000000","0.02000000"],["62072.99000000","0.22729000"],["62073.00000000","0.02100000"],["62073.28000000","0.41063000"],["62073.29000000","0.57942000"],["62073.85000000","0.00574000"],["62073.86000000","0.20000000"],["62073.95000000","0.20000000"],["62074.32000000","0.00032000"],["62075.00000000","0.00080000"],["62075.32000000","0.00300000"],["62075.47000000","0.00161000"],["62075.48000000","0.18532000"],["62075.74000000","0.00876000"],["62076.14000000","0.00032000"],["62076.30000000","0.00322000"],["62077.04000000","0.03000000"],["62077.10000000","0.46920000"],["62077.11000000","0.97814000"],["62077.40000000","0.00032000"],["62077.85000000","0.01095000"],["62077.86000000","0.32693000"],["62077.87000000","0.00405000"],["62078.89000000","0.37225000"],["62078.90000000","0.28123000"],["62079.00000000","0.04000000"],["62079.21000000","0.20000000"],["62079.22000000","0.09765000"],["62079.38000000","0.25711000"],["62080.07000000","0.18750000"],["62080.37000000","0.08053000"],["62080.48000000","0.00032000"],["62080.83000000","0.00026000"],["62081.00000000","0.03000000"],["62081.30000000","0.22250000"],["62081.53000000","0.42496000"],["62081.54000000","0.01988000"],["62081.89000000","0.98379000"],["62081.90000000","0.00050000"],["62082.01000000","0.01000000"],["62082.71000000","0.20000000"],["62083.31000000","0.15000000"],["62083.56000000","0.00032000"],["62085.40000000","0.00027000"],["62085.42000000","0.10000000"],["62085.94000000","0.06620000"],["62086.09000000","0.70300000"],["62086.26000000","0.08520000"],["62086.55000000","0.05787000"],["62086.64000000","0.00032000"],["62086.94000000","1.56200000"],["62086.95000000","0.00017000"],["62087.54000000","0.00056000"],["62087.60000000","0.25000000"],["62087.92000000","0.92687000"],["62087.93000000","0.18750000"],["62088.00000000","0.00032000"],["62088.86000000","0.00242000"],["62088.89000000","0.07500000"],["62089.72000000","0.00032000"],["62089.99000000","0.07035000"],["62090.00000000","0.84727000"],["62090.48000000","0.06967000"],["62091.74000000","0.00363000"],["62091.99000000","0.09009000"],["62092.19000000","0.20000000"],["62092.79000000","0.12930000"],["62092.80000000","0.00032000"],["62093.17000000","0.02300000"],["62093.65000000","0.11224000"],["62094.18000000","0.05000000"],["62094.79000000","0.09511000"]]};var O;(function(o){o.BTC="BTC",o.ETH="ETH"})(O||(O={}));var Ne=e=>{let t=e==O.BTC?Le:Le,{asks:o,bids:r}=t;return{asks:Ae(o,!1),bids:Ae(r,!0)}};var $t=async(e,t,o)=>await(await fetch(e,{method:"POST",headers:Object.assign({"content-type":"application/json"},o||{}),body:JSON.stringify(t)})).json();var Ue=class{isObject(t){return typeof t=="object"&&!(t instanceof Date)&&!Array.isArray(t)&&!(t instanceof RegExp)}process(t,o){for(let r of Object.keys(o||{})){if(!o||!o[r])continue;if(this.isObject(o[r]))return this.process(t,o[r]);let a=o[r];t=t.replace("#"+r,typeof a=="string"?`"${a}"`:a)}return t}async request(t,o){return t=this.process(t,o||{}),t=t.replace(/[\s\n]+/g," "),await $t("https://api.thegraph.com/subgraphs/name/ianlapham/uniswap-v3-subgraph",{query:t})}};var Qt=e=>{let t=[];return e.tokenHourDatas.forEach((o,r)=>{let{open:a,high:n,low:s,close:i}=o,l={index:r,openTime:o.periodStartUnix*1e3,volume:Number(o.totalValueLocked),spark:{open:Number(a),high:Number(n),low:Number(s),close:Number(i)}};t.push(l)}),t},Jt=e=>{switch(e){case"0x2260fac5e5542a773aa44fbcfedf7c193bc2c599":return{key:O.BTC,name:"Bitcoin",rank:1,items:{}};case"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2":return{key:O.ETH,name:"Ethereum",rank:2,items:{}}}return{}};var Fe=class extends Ue{async getTokenHourlyOHLC(t){let o=`
        {
            tokenHourDatas(
              first: 100
              skip: 0
              where: {
                  token: #token, 
                  periodStartUnix_gt: #start
              }    
              orderBy: periodStartUnix
              orderDirection: asc
          ) { 
              periodStartUnix
              high
              low
              open
              close
              totalValueLocked
          }  
        }`,r=await this.request(o,t),a=Jt(t.token);return a.items=Qt(r.data),a}};var We=()=>{let[e,t]=ie({}),[o,r]=ie({}),a=async()=>{let i={[O.BTC]:await Ne(O.BTC),[O.ETH]:await Ne(O.ETH)};r(i)},n=async(i,l,u)=>{let c=new Fe,m=`market-data-${l}`;if(!localStorage.hasOwnProperty(m)){let p=await c.getTokenHourlyOHLC({token:i,start:u});localStorage.setItem(m,JSON.stringify(p))}return JSON.parse(localStorage.getItem(m))},s=async()=>{let i=Math.round((new Date().getTime()-24*4*60*60*1e3)/1e3),l={[O.BTC]:await n("0x2260fac5e5542a773aa44fbcfedf7c193bc2c599","btc",i),[O.ETH]:await n("0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","eth",i)};t(l)};return j(()=>{a(),s()},[]),Object.keys(e).length?d("div",null,d(Yt,null,d(Xt,{asks:o.BTC.asks,bids:o.BTC.bids}),d("div",{className:"depth-chart-grid"},d("div",{className:"depth-combo"},d(Pe,{long:!1}),d(De,{long:!1})),d("div",{className:"depth-combo"},d(Pe,{long:!0}),d(De,{long:!0})))),d("div",{className:"market-box-grid"},d(Se,{state:e.BTC}),d(Se,{state:e.ETH})),d(Gt,{items:e.BTC.items})):d("div",null,"Loading...")};var jn=()=>d(pt,null,d(Ie,{default:!0,component:We}));ve(d(We,null),document.getElementById("app"));})();
